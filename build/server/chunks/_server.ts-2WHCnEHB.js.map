{"version":3,"file":"_server.ts-2WHCnEHB.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/outray/tree/_server.ts.js"],"sourcesContent":["import { promises } from \"fs\";\nimport path from \"path\";\nasync function getDirectoryTree(dirPath) {\n  const entries = await promises.readdir(dirPath, { withFileTypes: true });\n  const result = await Promise.all(\n    entries.map(async (entry) => {\n      const fullPath = path.join(dirPath, entry.name);\n      const stats = await promises.stat(fullPath);\n      const permissions = `0${(stats.mode & 511).toString(8)}`;\n      if (entry.isDirectory()) {\n        return {\n          name: entry.name,\n          type: \"directory\",\n          permissions,\n          children: await getDirectoryTree(fullPath)\n        };\n      } else {\n        return {\n          name: entry.name,\n          type: \"file\",\n          permissions\n        };\n      }\n    })\n  );\n  return result;\n}\nasync function GET() {\n  try {\n    const tree = await getDirectoryTree(process.cwd());\n    return new Response(JSON.stringify(tree), {\n      status: 200,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: \"Failed to read directory\" }), {\n      status: 500,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;AAEA,eAAe,gBAAgB,CAAC,OAAO,EAAE;AACzC,EAAE,MAAM,OAAO,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;AAC3E,EAAE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,GAAG;AAClC,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,KAAK,KAAK;AACjC,MAAM,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;AACtD,MAAM,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAClD,MAAM,MAAM,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/D,MAAM,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AAC/B,QAAQ,OAAO;AACf,UAAU,IAAI,EAAE,KAAK,CAAC,IAAI;AAC1B,UAAU,IAAI,EAAE,WAAW;AAC3B,UAAU,WAAW;AACrB,UAAU,QAAQ,EAAE,MAAM,gBAAgB,CAAC,QAAQ,CAAC;AACpD,SAAS,CAAC;AACV,OAAO,MAAM;AACb,QAAQ,OAAO;AACf,UAAU,IAAI,EAAE,KAAK,CAAC,IAAI;AAC1B,UAAU,IAAI,EAAE,MAAM;AACtB,UAAU,WAAW;AACrB,SAAS,CAAC;AACV,OAAO;AACP,KAAK,CAAC;AACN,GAAG,CAAC;AACJ,EAAE,OAAO,MAAM,CAAC;AAChB,CAAC;AACD,eAAe,GAAG,GAAG;AACrB,EAAE,IAAI;AACN,IAAI,MAAM,IAAI,GAAG,MAAM,gBAAgB,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;AACvD,IAAI,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;AAC9C,MAAM,MAAM,EAAE,GAAG;AACjB,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,kBAAkB;AAC1C,OAAO;AACP,KAAK,CAAC,CAAC;AACP,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,0BAA0B,EAAE,CAAC,EAAE;AAC/E,MAAM,MAAM,EAAE,GAAG;AACjB,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,kBAAkB;AAC1C,OAAO;AACP,KAAK,CAAC,CAAC;AACP,GAAG;AACH;;;;"}